!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){(function(e){"use strict";var t=n(2),i=n(3),o=n(5),r=n(6),a=n(16),s=n(17);e(function(){function n(){requestAnimationFrame(n),f.update(),u.render(l)}function c(){var e,t,n,o;e=t=d.width(),n=o=d.height();var r=i.gameWidth,c=i.gameHeight,p=c/r;p>o/t?t=o/p:o=t*p,h.clear(),h.beginFill(16777215,1);var f=(e-t)/2,v=(n-o)/2;h.drawRect(f,v,t,o),h.endFill(),l.x=f,l.y=v,l.scale.x=t/r,l.scale.y=o/c,u.resize(e,n),a.updatePosition(f,v),s.updatePosition(f,v,t)}var u=t.autoDetectRenderer(window.innerWidth,window.innerHeight,{view:e("canvas")[0]}),l=new t.Container,h=new t.Graphics,p=t.loader,f=new o(l),d=e(window);a.init(),s.init(),i.gameStage=l,l.mask=h,p.baseUrl="assets/";var v=[];for(var m in r)v.push(r[m]);p.once("complete",function(){f.init(),n()}).add(v).load(),d.on("resize",c),c()})}).call(t,n(1))},function(e,t){e.exports=$},function(e,t){e.exports=PIXI},function(e,t,n){"use strict";var i=n(4);e.exports={gameStage:null,gameWidth:500,gameHeight:800,gameEvent:new i,gameStartTime:null,input:new i}},function(e,t,n){"use strict";function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(){}var r=Object.prototype.hasOwnProperty,a="function"!=typeof Object.create?"~":!1;o.prototype._events=void 0,o.prototype.eventNames=function(){var e,t=this._events,n=[];if(!t)return n;for(e in t)r.call(t,e)&&n.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(e,t){var n=a?a+e:e,i=this._events&&this._events[n];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,r=i.length,s=new Array(r);r>o;o++)s[o]=i[o].fn;return s},o.prototype.emit=function(e,t,n,i,o,r){var s=a?a+e:e;if(!this._events||!this._events[s])return!1;var c,u,l=this._events[s],h=arguments.length;if("function"==typeof l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,o),!0;case 6:return l.fn.call(l.context,t,n,i,o,r),!0}for(u=1,c=new Array(h-1);h>u;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var p,f=l.length;for(u=0;f>u;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;default:if(!c)for(p=1,c=new Array(h-1);h>p;p++)c[p-1]=arguments[p];l[u].fn.apply(l[u].context,c)}}return!0},o.prototype.on=function(e,t,n){var o=new i(t,n||this),r=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],o]:this._events[r].push(o):this._events[r]=o,this},o.prototype.once=function(e,t,n){var o=new i(t,n||this,!0),r=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],o]:this._events[r].push(o):this._events[r]=o,this},o.prototype.removeListener=function(e,t,n,i){var o=a?a+e:e;if(!this._events||!this._events[o])return this;var r=this._events[o],s=[];if(t)if(r.fn)(r.fn!==t||i&&!r.once||n&&r.context!==n)&&s.push(r);else for(var c=0,u=r.length;u>c;c++)(r[c].fn!==t||i&&!r[c].once||n&&r[c].context!==n)&&s.push(r[c]);return s.length?this._events[o]=1===s.length?s[0]:s:delete this._events[o],this},o.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[a?a+e:e]:this._events=a?{}:Object.create(null),this):this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=a,e.exports=o},function(e,t,n){"use strict";function i(e){function t(t){t.data.local=e.toLocal(t.data.global),r.input.emit(t.type,t)}function n(e){m+=e,h.updateScore(m),4>x&&m/500>x&&(x++,p.updateLevel(x),i.updateLevel(x))}var i,f=this,d=Date.now(),v=[],m=0,x=1;f.init=function(){var h=o.loader.resources,p=new c(h[a.plane.name].texture),f=new s(h[a.bg.name].texture,p);e.addChild(f),v.push(f),e.addChild(p),v.push(p);var d=new u(h[a.bullet.name].texture);e.addChild(d),v.push(d),i=new l,e.addChild(i),v.push(i),e.interactive=!0,e.on("mousedown",t).on("touchstart",t).on("mouseup",t).on("touchend",t).on("mouseupoutside",t).on("touchendoutside",t).on("mousemove",t).on("touchmove",t);for(var m=0,x=v.length;x>m;m++)v[m].init();r.gameStartTime=Date.now(),r.gameEvent.on("score",n)},f.update=function(){for(var e=Date.now(),t=.001*(e-d),n=0,i=v.length;i>n;n++)v[n].update(t);d=e}}var o=n(2),r=n(3),a=n(6),s=n(7),c=n(9),u=n(13),l=n(14),h=n(16),p=n(17);e.exports=i},function(e,t){"use strict";e.exports={plane:{name:"plane",url:"redfighter.png"},bg:{name:"bg",url:"spacebg.jpg"},rock1:{name:"rock1",url:"rock1.png"},rock2:{name:"rock2",url:"rock2.png"},bullet:{name:"bullet",url:"bullet.png"}}},function(e,t,n){"use strict";function i(e,t){var n=this;o.Container.call(n);var i,a,s=50,c=t.minX,u=t.maxX-c;n.init=function(){var t=new o.Sprite(e);n.addChild(t),i=t.height,t=new o.Sprite(e),t.y=-i,n.addChild(t),n.scale.x=n.scale.y=r.gameHeight/i,i=n.height/2,n.cacheAsBitmap=!0,a=n.width-r.gameWidth},n.update=function(e){n.y+=s*e,n.y>i&&(n.y-=i),n.x=-a*(t.x-c)/u}}var o=n(2),r=n(3),a=n(8);a(i,o.Container),e.exports=i},function(e,t){"use strict";e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e}},function(e,t,n){"use strict";function i(e){function t(e){d=!0,f=e.data.local}function n(){d=!1,f=null}function i(e){d&&(f=e.data.local)}function c(){if(l.scale.x=l.scale.y=1,l.y=s.gameHeight,v)return void v.play(0);var e=l.y-l.height,t=e+l.height/2;v=new a,v.add(r.to(l.scale,1.5,{x:.5,y:.5}),0),v.add(r.to(l,.5,{y:e}),0),v.add(r.to(l,1,{y:t,onComplete:function(){h=!1,s.gameEvent.emit("spawn")}}),.5)}var l=this;o.Sprite.call(l,e);var h=!0,p=500,f=null,d=!1;l.maxX=s.gameWidth-l.width/2,l.minX=l.width/2;var v,m;l.init=function(){l.anchor.x=l.anchor.y=.5,l.x=s.gameWidth/2,s.input.on("mousedown",t).on("touchstart",t).on("mouseup",n).on("touchend",n).on("mouseupoutside",n).on("touchendoutside",n).on("mousemove",i).on("touchmove",i),u.addGroup(l,"plane"),c()},l.update=function(e){if(!l.parent){if(!(Date.now()-m>=5e3))return;s.gameStage.addChild(l),c()}if(!h){if(f&&l.x!=f.x){var t=f.x,n=Math.min(p*e,Math.abs(t-l.x));l.x+=l.x<t?n:-n,l.x>l.maxX?l.x=l.maxX:l.x<l.minX&&(l.x=l.minX)}d&&s.gameEvent.emit("shoot",l.x,l.y);var i=u.isCollide(l,"rock");i&&(i.parent.removeChild(i),l.parent.removeChild(l),m=Date.now(),s.gameEvent.emit("dead"),h=!0)}}}var o=n(2),r=n(10),a=n(11),s=n(3),c=n(8),u=n(12);c(i,o.Sprite),e.exports=i},function(e,t){e.exports=TweenMax},function(e,t){e.exports=TimelineMax},function(e,t){"use strict";var n={},i={addGroup:function(e,t){var i=n[t];i?i.push(e):n[t]=[e]},isCollide:function(e,t){if(null!=e.parent){for(var i,o,r,a,s,c=e.width,u=e.height,l=e.x+(.5-e.anchor.x)*c,h=e.y+(.5-e.anchor.y)*u,p=n[t],f=0,d=p.length;d>f;f++)if(i=p[f],null!=i.parent&&(o=i.width,r=i.height,a=i.x+(.5-i.anchor.x)*o,s=i.y+(.5-i.anchor.y)*r,Math.abs(l-a)<(c+o)/2&&Math.abs(h-s)<(u+r)/2))return i;return null}}};e.exports=i},function(e,t,n){"use strict";function i(e){function t(e,t){var i=Date.now();if(!(u&&1e3/l>i-u)){u=i;var o=a.pop();o.x=e,o.y=t,c.push(o),n.addChild(o)}}var n=this,i=20;o.Container.call(n);var a=[],c=[],u=null,l=10,h=1e3;n.init=function(){for(var n=0;i>n;n++){var c=new o.Sprite(e);c.anchor.x=c.anchor.y=.5,a.push(c),s.addGroup(c,"bullet")}r.gameEvent.on("shoot",t)},n.update=function(e){for(var t=0,i=c.length;i>t;t++){var o=c[t];o.y-=h*e,(o.y<-o.height||!o.parent)&&(n.removeChild(o),a.push(o),c.splice(t,1),i--,t--)}}}var o=n(2),r=n(3),a=n(8),s=n(12);a(i,o.Container),e.exports=i},function(e,t,n){"use strict";function i(){function e(){var e=Date.now();if(!(p||h.length>a*n||f&&1e3/d>e-f)){f=e;for(var o,r=i[Math.floor(Math.random()*a)];!o;){if(o=l[r].pop(),!o)return void(r=(r+1)%a);o.refresh(),h.push(o),t.addChild(o)}}}var t=this,n=40;o.Container.call(t);var i=[s.rock1.name,s.rock2.name],a=i.length,l={},h=[],p=!0,f=null,d=2;t.init=function(){var e,t,s,u,h,f,d=o.loader.resources;for(t=0;a>t;t++)for(s=i[t],u=d[s].texture,h=l[s]=[],e=0;n>e;e++)f=new c(s,u),f.init(),h.push(f);r.gameEvent.on("spawn",function(){p=!1}),r.gameEvent.on("dead",function(){p=!0})},t.update=function(t){for(var n=0,i=h.length;i>n;n++){var o=h[n];o.parent&&o.y<u+o.height?o.update(t):(l[o.name()].push(o),h.splice(n,1),i--,n--)}e()},t.updateLevel=function(e){d=2*e}}var o=n(2),r=n(3),a=n(8),s=n(6),c=n(15),u=r.gameHeight;a(i,o.Container),e.exports=i},function(e,t,n){"use strict";function i(e,t){function n(){i.x=u/4+Math.random()*u/2,i.y=-i.height,i.speedX=100*(1*Math.random()-.5),i.speedY=100*(1+4*Math.random()),i.speedRotation=10*(1*Math.random()-.5),i.life=i.initialLife}var i=this;o.Sprite.call(i,t),e==c.rock1.name?i.initialLife=4:i.initialLife=1,i.name=function(){return e},i.refresh=n,i.init=function(){i.anchor.x=i.anchor.y=.5,s.addGroup(i,"rock"),n()},i.update=function(t){if(i.x+=i.speedX*t,i.y+=i.speedY*t,i.y>r.gameHeight+i.height)return void i.parent.removeChild(i);var n=s.isCollide(i,"bullet");if(i.rotation+=i.speedRotation*t,n){if(n.parent.removeChild(n),i.life--,i.life>0)return;i.parent.removeChild(i),e==c.rock1.name?r.gameEvent.emit("score",10):r.gameEvent.emit("score",5)}}}var o=n(2),r=n(3),a=n(8),s=n(12),c=n(6),u=r.gameWidth;a(i,o.Sprite),e.exports=i},function(e,t,n){(function(t){"use strict";var n,i;e.exports={init:function(){n=t(".scoreDiv"),i=t(".scoreDiv span")},updateScore:function(e){i.html(e)},updatePosition:function(e,t){n.css({top:t,left:e})}}}).call(t,n(1))},function(e,t,n){(function(t){"use strict";var n,i;e.exports={init:function(){n=t(".levelDiv"),i=t(".levelDiv span")},updateLevel:function(e){i.html(e)},updatePosition:function(e,t,i){n.css({top:t,left:e,width:i})}}}).call(t,n(1))}]);
//# sourceMappingURL=bundle.js.map