!function(e){function n(o){if(t[o])return t[o].exports;var i=t[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){const o=t(1),i=t(2),r=t(6),a=t(8),s=t(9),c=t(22),u=t(23);$(function(){function e(){requestAnimationFrame(e),f.update(),t.render(l)}function n(){var e,n,o,r;e=n=p.width(),o=r=p.height();var a=i.gameWidth,s=i.gameHeight,f=s/a;f>r/n?n=r/f:r=n*f,h.clear(),h.beginFill(16777215,1);var d=(e-n)/2,v=(o-r)/2;h.drawRect(d,v,n,r),h.endFill(),l.x=d,l.y=v,l.scale.x=n/a,l.scale.y=r/s,t.resize(e,o),c.updatePosition(d,v),u.updatePosition((e-n)/2,v)}var t=o.autoDetectRenderer(window.innerWidth,window.innerHeight,{view:$("canvas")[0]}),l=new o.Container,h=new o.Graphics,f=new a(l),p=$(window);c.init(),u.init(),i.init(l),l.mask=h,function(){var n=$.Deferred(),t=$.Deferred(),a=o.loader;a.baseUrl="image/";var c=[];for(var u in s)c.push(s[u]);a.once("complete",function(){n.resolve()}).once("error",function(){n.reject()}).add(c).load(),i.gameEvent.once("soundDone",function(){t.resolve()}),i.gameEvent.once("soundFail",function(){t.reject()}),r.init(),$.when(n,t).then(function(){n=t=a=c=null;var o=$(".loading");o.find("div").html("Tap on screen to start"),o.on("click",function(){o.off("click"),o.detach(),o=null,f.init(),i.gameEvent.emit("gameStart"),e()})},function(){alert("Loading failed")})}(),p.on("resize",n),n()})},function(e,n){e.exports=PIXI},function(e,n,t){const o=t(3),i=t(4);e.exports={init:function(e){this.gameStage=e,this.Input=new i(e)},gameStage:null,gameWidth:500,gameHeight:800,gameEvent:new o,Input:null}},function(e,n,t){"use strict";function o(e,n,t){this.fn=e,this.context=n,this.once=t||!1}function i(){}var r=Object.prototype.hasOwnProperty,a="function"!=typeof Object.create?"~":!1;i.prototype._events=void 0,i.prototype.eventNames=function(){var e,n=this._events,t=[];if(!n)return t;for(e in n)r.call(n,e)&&t.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t},i.prototype.listeners=function(e,n){var t=a?a+e:e,o=this._events&&this._events[t];if(n)return!!o;if(!o)return[];if(o.fn)return[o.fn];for(var i=0,r=o.length,s=new Array(r);r>i;i++)s[i]=o[i].fn;return s},i.prototype.emit=function(e,n,t,o,i,r){var s=a?a+e:e;if(!this._events||!this._events[s])return!1;var c,u,l=this._events[s],h=arguments.length;if("function"==typeof l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,n),!0;case 3:return l.fn.call(l.context,n,t),!0;case 4:return l.fn.call(l.context,n,t,o),!0;case 5:return l.fn.call(l.context,n,t,o,i),!0;case 6:return l.fn.call(l.context,n,t,o,i,r),!0}for(u=1,c=new Array(h-1);h>u;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var f,p=l.length;for(u=0;p>u;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,n);break;case 3:l[u].fn.call(l[u].context,n,t);break;default:if(!c)for(f=1,c=new Array(h-1);h>f;f++)c[f-1]=arguments[f];l[u].fn.apply(l[u].context,c)}}return!0},i.prototype.on=function(e,n,t){var i=new o(n,t||this),r=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],i]:this._events[r].push(i):this._events[r]=i,this},i.prototype.once=function(e,n,t){var i=new o(n,t||this,!0),r=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],i]:this._events[r].push(i):this._events[r]=i,this},i.prototype.removeListener=function(e,n,t,o){var i=a?a+e:e;if(!this._events||!this._events[i])return this;var r=this._events[i],s=[];if(n)if(r.fn)(r.fn!==n||o&&!r.once||t&&r.context!==t)&&s.push(r);else for(var c=0,u=r.length;u>c;c++)(r[c].fn!==n||o&&!r[c].once||t&&r[c].context!==t)&&s.push(r[c]);return s.length?this._events[i]=1===s.length?s[0]:s:delete this._events[i],this},i.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[a?a+e:e]:this._events=a?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=a,e.exports=i},function(e,n,t){function o(e){function n(e){o.emit(e.type,e),"keydown"==e.type?r[e.keyCode]=!0:"keyup"==e.type&&(r[e.keyCode]=!1)}function t(n){n.data.local=e.toLocal(n.data.global),o.emit(n.type,n)}var o=this;i.call(o);var r={};o.KEY_LEFT=37,o.KEY_UP=38,o.KEY_RIGHT=39,o.KEY_DOWN=40,$(function(){$(window).keydown(n).keyup(n).keypress(n)}),o.isDown=function(e){return r[e]},o.isUp=function(e){return!r[e]},e.interactive=!0,e.on("mousedown",t).on("touchstart",t).on("mouseup",t).on("touchend",t).on("mouseupoutside",t).on("touchendoutside",t).on("mousemove",t).on("touchmove",t)}const i=t(3),r=t(5);t(2);r(o,i),e.exports=o},function(e,n){e.exports=function(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e}},function(e,n,t){function o(){var e,n="sound/",t={laser:"laser",explosion1:"explosion1",explosion2:"explosion2",explosion3:"explosion3",music:"music"},o=200,a=.2;!function(){function e(){a++,a>=Object.keys(t).length&&(a=s=null,r.gameEvent.emit("soundDone"))}function o(){r.gameEvent.emit("soundFail")}var a=0,s=[];i.on("fileload",e),i.on("fileerror",o);for(var c in t)s.push({id:c,src:t[c]+".mp3"});i.registerSounds(s,n)}(),r.gameEvent.on("explosion",function(e,n,o){o?i.play(t.explosion2):i.play(t.explosion1)}),r.gameEvent.on("dead",function(){i.play(t.explosion3)}),r.gameEvent.on("shoot",function(){var n=Date.now();e&&o>n-e||(e=n,i.play(t.laser,{volume:a}))}),r.gameEvent.once("gameStart",function(){i.play(t.music,{loop:-1})})}const i=t(7),r=t(2);var a=null;e.exports={init:function(){return a?a:a=new o}}},function(e,n){e.exports=createjs.Sound},function(e,n,t){function o(e){function n(e){b+=e,p.updateScore(b)}function t(){b=0,p.updateScore(b)}var o,v,m,g,x,y=this,w=[],b=0,E=60,_=1e4;y.init=function(){var y=i.loader.resources,_=new c(y[a.plane.name].texture),T=new s(y[a.bg.name].texture,_),C=u.getInstance(y[a.bullet.name].texture);m=l.getInstance(),g=h.getInstance();var S=f.getInstance();e.addChild(T),e.addChild(_),C.addToStage(e),m.addToStage(e),g.addToStage(e),S.addToStage(e),w.push(_),w.push(T),w.push(C),w.push(m),w.push(g);for(var M=0,k=w.length;k>M;M++)w[M].init();r.gameEvent.on("score",n),r.gameEvent.on("resetscore",t),p.updateScore(b),d.updateTime(E),v=x=o=Date.now()},y.update=function(){for(var e=Date.now(),n=.001*(e-o),t=0,i=w.length;i>t;t++)w[t].update(n);e-x>_&&(g.spawn(),x=e),e-v>1e3&&(v+=1e3,d.updateTime()),o=e}}const i=t(1),r=t(2),a=t(9),s=t(10),c=t(11),u=t(15),l=t(16),h=t(18),f=t(20),p=t(22),d=t(23);e.exports=o},function(e,n){e.exports={plane:{name:"plane",url:"redfighter.png"},bg:{name:"bg",url:"spacebg.jpg"},rock1:{name:"rock1",url:"rock1.png"},rock2:{name:"rock2",url:"rock2.png"},bullet:{name:"bullet",url:"bullet.png"},explosion1:{name:"explosion1",url:"explosion1.json"},explosion2:{name:"explosion2",url:"explosion2.json"},dbs:{name:"dbs",url:"dbs.png"},standard:{name:"standard",url:"standard.png"},uob:{name:"uob",url:"uob.png"}}},function(e,n,t){function o(e,n){var t=this;i.Container.call(t);var o,a,s=50,c=n.minX,u=n.maxX-c;t.init=function(){var n=new i.Sprite(e);t.addChild(n),o=n.height,n=new i.Sprite(e),n.y=-o,t.addChild(n),t.scale.x=t.scale.y=r.gameHeight/o,o=t.height/2,t.cacheAsBitmap=!0,a=t.width-r.gameWidth},t.update=function(e){t.y+=s*e,t.y>o&&(t.y-=o),t.x=-a*(n.x-c)/u}}const i=t(1),r=t(2),a=t(5);a(o,i.Container),e.exports=o},function(e,n,t){function o(e){function n(e){d=!0,p=e.data.local}function t(){d=!1,p=null}function o(e){d&&(p=e.data.local)}function c(){if(l.scale.x=l.scale.y=1,l.y=s.gameHeight,v)return void v.play(0);var e=l.y-l.height,n=e+l.height/2;v=new a,v.add(r.to(l.scale,1.5,{x:.5,y:.5}),0),v.add(r.to(l,.5,{y:e}),0),v.add(r.to(l,1,{y:n,onComplete:function(){h=!1,s.gameEvent.emit("spawn")}}),.5)}var l=this;i.Sprite.call(l,e);var h=!0,f=500,p=null,d=!1;l.maxX=s.gameWidth-l.width/2,l.minX=l.width/2;var v,m;l.init=function(){l.anchor.x=l.anchor.y=.5,l.x=s.gameWidth/2,s.Input.on("mousedown",n).on("touchstart",n).on("mouseup",t).on("touchend",t).on("mouseupoutside",t).on("touchendoutside",t).on("mousemove",o).on("touchmove",o),l.scale.x=l.scale.y=.5,u.addGroup(l,"plane",u.TYPE_CIRCLE,{width:l.width-10,height:l.height-10}),c()},l.update=function(e){if(!l.visible){if(!(Date.now()-m>=5e3))return;l.visible=!0,c()}if(!h){if(p){if(l.x!=p.x){var n=p.x,t=Math.min(f*e,Math.abs(n-l.x));l.x+=l.x<n?t:-t}}else{var o=s.Input.isDown(s.Input.KEY_LEFT),i=s.Input.isDown(s.Input.KEY_RIGHT);(o||i)&&(l.x+=(o?-1:1)*f*e)}l.x>l.maxX?l.x=l.maxX:l.x<l.minX&&(l.x=l.minX),s.gameEvent.emit("shoot",l.x,l.y);var r=u.isCollide(l,"rock");r&&(r.visible=!1,l.visible=!1,m=Date.now(),s.gameEvent.emit("dead"),s.gameEvent.emit("explosion",r.x,r.y,r.isBig),s.gameEvent.emit("explosion",l.x,l.y),h=!0)}}}const i=t(1),r=t(12),a=t(13),s=t(2),c=t(5),u=t(14);c(o,i.Sprite),e.exports=o},function(e,n){e.exports=TweenMax},function(e,n){e.exports=TimelineMax},function(e,n){function t(e,n,t,o,i,r,a,s){return Math.abs(e-i)<(t+a)/2&&Math.abs(n-r)<(o+s)/2}function o(e,n,t,o,r,a,s,c){var u=t/2,l=o/2,h=e>r?e-u:e+u,f=n>a?n-l:n+l;return i(Math.abs(h-r),Math.abs(f-a))<c/2}function i(e,n){return Math.sqrt(Math.pow(e,2)+Math.pow(n,2))}function r(e,n,t,o,r,a,s,c){var u=o/2+c/2,l=i(Math.abs(e-r),Math.abs(n-a));return u>l}function a(e,n,i,a,s,u,l,h,f,p){return s==c.TYPE_RECTANGLE?p==c.TYPE_RECTANGLE?t(e,n,i,a,u,l,h,f):o(e,n,i,a,u,l,h,f):p==c.TYPE_RECTANGLE?o(u,l,h,f,e,n,i,a):r(e,n,i,a,u,l,h,f)}var s={},c={TYPE_RECTANGLE:0,TYPE_CIRCLE:1,addGroup:function(e,n,t,o){t?e.collisionType=t:e.collisionType=this.TYPE_RECTANGLE,o?e.collisionArea={width:o.width,height:o.height}:e.collisionArea={width:e.width,height:e.height};var i=s[n];i?i.push(e):s[n]=[e]},isCollide:function(e,n){if(e.visible){for(var t,o,i,r,c,u,l=e.collisionArea.width,h=e.collisionArea.height,f=e.x+(.5-e.anchor.x)*l,p=e.y+(.5-e.anchor.y)*h,d=e.collisionType,v=s[n],m=0,g=v.length;g>m;m++)if(t=v[m],t.visible&&(o=t.collisionArea.width,i=t.collisionArea.height,r=t.x+(.5-t.anchor.x)*o,c=t.y+(.5-t.anchor.y)*i,u=t.collisionType,a(f,p,l,h,d,r,c,o,i,u)))return t;return null}}};e.exports=c},function(e,n,t){function o(e){function n(e,n){var t=Date.now();if(!(u&&1e3/l>t-u)){u=t;var o=s.pop();o.x=e,o.y=n,c.push(o),o.visible=!0}}var t=this,o=20,s=[],c=[],u=null,l=10,h=1e3;!function(){for(var n=0;o>n;n++){var t=new i.Sprite(e);t.anchor.x=t.anchor.y=.5,t.visible=!1,s.push(t),a.addGroup(t,"bullet")}}(),t.addToStage=function(e){var n;for(n=0;o>n;n++)e.addChild(s[n])},t.init=function(){r.gameEvent.on("shoot",n)},t.update=function(e){for(var n=0,t=c.length;t>n;n++){var o=c[n];o.y-=h*e,(o.y<-o.height||!o.visible)&&(o.visible=!1,s.push(o),c.splice(n,1),t--,n--)}}}const i=t(1),r=t(2),a=t(14);var s=null;e.exports={getInstance:function(e){return s?s:s=new o(e)}}},function(e,n,t){function o(){function e(){var e=Date.now();if(!(h||l.length>c*t||f&&1e3/d>e-f)){f=e;for(var n,i=o[Math.floor(Math.random()*c)];!n;){if(n=u[i].pop(),!n)return void(i=(i+1)%c);n.refresh(),l.push(n),n.visible=!0}}}var n=this,t=40,o=[a.rock1.name,a.rock2.name],c=o.length,u={},l=[],h=!0,f=null,p=2,d=p;!function(){var e,n,r,a,l,h,f=i.loader.resources;for(e=0;c>e;e++)for(r=o[e],a=f[r].texture,l=u[r]=[],n=0;t>n;n++)h=new s(r,a),h.init(),h.visible=!1,l.push(h)}(),n.addToStage=function(e){var n,o,i;for(n in u)for(o=u[n],i=0;t>i;i++)e.addChild(o[i])},n.init=function(){r.gameEvent.on("spawn",function(){h=!1}),r.gameEvent.on("dead",function(){h=!0})},n.update=function(n){for(var t=0,o=l.length;o>t;t++){var i=l[t];i.visible&&i.y<r.gameHeight+i.height?i.update(n):(u[i.type].push(i),l.splice(t,1),o--,t--)}e()},n.updateLevel=function(e){d=e*p}}const i=t(1),r=t(2),a=t(9),s=t(17);var c=null;e.exports={getInstance:function(){return c?c:c=new o}}},function(e,n,t){function o(e,n){function t(){o.x=r.gameWidth/4+Math.random()*r.gameWidth/2,o.y=-o.height,o.speedX=100*(1*Math.random()-.5),o.speedY=100*(1.5+Math.random()*a),o.speedRotation=10*(1*Math.random()-.5),o.life=o.initialLife}var o=this;i.Sprite.call(o,n),e==c.rock1.name?o.initialLife=4:o.initialLife=1,o.type=e,o.isBig=e==c.rock1.name;var a=o.isBig?2:4;o.refresh=t,o.init=function(){o.anchor.x=o.anchor.y=.5,s.addGroup(o,"rock",s.TYPE_CIRCLE),t()},o.update=function(e){if(o.x+=o.speedX*e,o.y+=o.speedY*e,o.y>r.gameHeight+o.height)return void(o.visible=!1);var n=s.isCollide(o,"bullet");if(o.rotation+=o.speedRotation*e,n){if(n.visible=!1,o.life--,o.life>0)return;o.visible=!1,r.gameEvent.emit("explosion",o.x,o.y,o.isBig),o.isBig?r.gameEvent.emit("score",10):r.gameEvent.emit("score",5)}}}const i=t(1),r=t(2),a=t(5),s=t(14),c=t(9);a(o,i.Sprite),e.exports=o},function(e,n,t){function o(){function e(){if(!(l.length>c*t))for(var e,n=o[Math.floor(Math.random()*c)];!e;){if(e=u[n].pop(),!e)return void(n=(n+1)%c);e.refresh(),l.push(e),e.visible=!0}}var n=this,t=2,o=[a.dbs.name,a.standard.name,a.uob.name],c=o.length,u={},l=[];!function(){var e,n,r,a,l,h,f=i.loader.resources;for(e=0;c>e;e++)for(r=o[e],a=f[r].texture,l=u[r]=[],n=0;t>n;n++)h=new s(r,a),h.init(),h.visible=!1,l.push(h)}(),n.addToStage=function(e){var n,o,i;for(n in u)for(o=u[n],i=0;t>i;i++)e.addChild(o[i])},n.init=function(){},n.update=function(e){for(var n=0,t=l.length;t>n;n++){var o=l[n];o.visible&&o.y<r.gameHeight+o.height?o.update(e):(u[o.type].push(o),l.splice(n,1),t--,n--)}},n.spawn=e}const i=t(1),r=t(2),a=t(9),s=t(19);var c=null;e.exports={getInstance:function(){return c?c:c=new o}}},function(e,n,t){function o(e,n){var t=this;i.Sprite.call(t,n),t.type=e;var o=10,a=1;t.refresh=function(){t.x=r.gameWidth/4+Math.random()*r.gameWidth/2,t.y=-t.height,t.speedX=100*(1*Math.random()-.5),t.speedY=100*(1.5+Math.random()*a),t.life=o},t.init=function(){t.anchor.x=t.anchor.y=.5,t.refresh(),s.addGroup(t,"bank")},t.update=function(n){if(t.x+=t.speedX*n,t.y+=t.speedY*n,t.y>r.gameHeight+t.height)return void(t.visible=!1);var o=s.isCollide(t,"bullet");if(o){if(o.visible=!1,t.life--,t.life>0)return;t.visible=!1,r.gameEvent.emit("explosion",t.x,t.y,!0),e==c.dbs.name?r.gameEvent.emit("resetscore"):r.gameEvent.emit("score",100)}}}const i=t(1),r=t(2),a=t(5),s=t(14),c=t(9);a(o,i.Sprite),e.exports=o},function(e,n,t){function o(){var e=this,n={},t=[{name:a.explosion1.name,count:10},{name:a.explosion2.name,count:20}];!function(){var e,o,r,a,c,u,l,h=t.length,f=i.loader.resources;for(e=0;h>e;e++)for(r=t[e].name,a=t[e].count,c=s.convert(f[r].textures),u=n[r]=[],o=0;a>o;o++)l=new i.extras.MovieClip(c),l.anchor.x=l.anchor.y=.5,l.loop=!1,l.type=r,0==e&&(l.animationSpeed=.5,l.scale.x=l.scale.y=2),l.onComplete=function(){this.visible=!1,n[this.type].push(this)},l.visible=!1,u.push(l)}(),e.addToStage=function(e){var t,o,i,r;for(t in n)for(o=n[t],r=o.length,i=0;r>i;i++)e.addChild(o[i])},r.gameEvent.on("explosion",function(e,o,i){var r;r=i?t[0].name:t[1].name;var a=n[r].pop();a&&(a.rotation=(Math.random()>.5?-1:1)*Math.random()*Math.PI,a.x=e,a.y=o,a.visible=!0,a.gotoAndPlay(0))})}const i=t(1),r=t(2),a=t(9),s=t(21);var c=null;e.exports={getInstance:function(){return c?c:c=new o}}},function(e,n){e.exports={convert:function(e){var n=[];for(var t in e)n.push(e[t]);return n}}},function(e,n){var t,o;e.exports={init:function(){t=$(".scoreDiv"),o=$(".scoreDiv span")},updateScore:function(e){o.html(e)},updatePosition:function(e,n){t.css({top:n,left:e})}}},function(e,n){var t,o;e.exports={init:function(){t=$(".timeDiv"),o=$(".timeDiv span")},updateTime:function(e){o.html(e)},updatePosition:function(e,n){t.css({top:n,right:e})}}}]);
//# sourceMappingURL=bundle.js.map