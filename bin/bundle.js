!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){(function(e){"use strict";var t=n(2),i=n(3),o=n(5),r=n(6),a=n(16),s=n(17);e(function(){function n(){requestAnimationFrame(n),f.update(),u.render(l)}function c(){var e,t,n,o;e=t=d.width(),n=o=d.height();var r=i.gameWidth,c=i.gameHeight,p=c/r;p>o/t?t=o/p:o=t*p,h.clear(),h.beginFill(16777215,1);var f=(e-t)/2,v=(n-o)/2;h.drawRect(f,v,t,o),h.endFill(),l.x=f,l.y=v,l.scale.x=t/r,l.scale.y=o/c,u.resize(e,n),a.updatePosition(f,v),s.updatePosition(f,v,t)}var u=t.autoDetectRenderer(window.innerWidth,window.innerHeight,{view:e("canvas")[0]}),l=new t.Container,h=new t.Graphics,p=t.loader,f=new o(l),d=e(window);a.init(),s.init(),i.gameStage=l,l.mask=h,p.baseUrl="assets/";var v=[];for(var m in r)v.push(r[m]);p.once("complete",function(){f.init(),n()}).add(v).load(),d.on("resize",c),c()})}).call(t,n(1))},function(e,t){e.exports=$},function(e,t){e.exports=PIXI},function(e,t,n){"use strict";var i=n(4);e.exports={gameStage:null,gameWidth:500,gameHeight:800,gameEvent:new i,gameStartTime:null,input:new i}},function(e,t,n){"use strict";function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(){}var r=Object.prototype.hasOwnProperty,a="function"!=typeof Object.create?"~":!1;o.prototype._events=void 0,o.prototype.eventNames=function(){var e,t=this._events,n=[];if(!t)return n;for(e in t)r.call(t,e)&&n.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(e,t){var n=a?a+e:e,i=this._events&&this._events[n];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,r=i.length,s=new Array(r);r>o;o++)s[o]=i[o].fn;return s},o.prototype.emit=function(e,t,n,i,o,r){var s=a?a+e:e;if(!this._events||!this._events[s])return!1;var c,u,l=this._events[s],h=arguments.length;if("function"==typeof l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,o),!0;case 6:return l.fn.call(l.context,t,n,i,o,r),!0}for(u=1,c=new Array(h-1);h>u;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var p,f=l.length;for(u=0;f>u;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;default:if(!c)for(p=1,c=new Array(h-1);h>p;p++)c[p-1]=arguments[p];l[u].fn.apply(l[u].context,c)}}return!0},o.prototype.on=function(e,t,n){var o=new i(t,n||this),r=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],o]:this._events[r].push(o):this._events[r]=o,this},o.prototype.once=function(e,t,n){var o=new i(t,n||this,!0),r=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],o]:this._events[r].push(o):this._events[r]=o,this},o.prototype.removeListener=function(e,t,n,i){var o=a?a+e:e;if(!this._events||!this._events[o])return this;var r=this._events[o],s=[];if(t)if(r.fn)(r.fn!==t||i&&!r.once||n&&r.context!==n)&&s.push(r);else for(var c=0,u=r.length;u>c;c++)(r[c].fn!==t||i&&!r[c].once||n&&r[c].context!==n)&&s.push(r[c]);return s.length?this._events[o]=1===s.length?s[0]:s:delete this._events[o],this},o.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[a?a+e:e]:this._events=a?{}:Object.create(null),this):this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=a,e.exports=o},function(e,t,n){"use strict";function i(e){function t(e){e.data.local=d.toLocal(e.data.global),r.input.emit(e.type,e)}function n(e){x+=e,h.updateScore(x),4>g&&x/500>g&&(g++,p.updateLevel(g),i.updateLevel(g))}var i,f=this,d=e,v=Date.now(),m=[],x=0,g=1;f.init=function(){var e=o.loader.resources,h=new c(e[a.plane.name].texture),p=new s(e[a.bg.name].texture,h);d.addChild(p),m.push(p),d.addChild(h),m.push(h);var f=new u(e[a.bullet.name].texture);d.addChild(f),m.push(f),i=new l,d.addChild(i),m.push(i),d.interactive=!0,d.on("mousedown",t).on("touchstart",t).on("mouseup",t).on("touchend",t).on("mouseupoutside",t).on("touchendoutside",t).on("mousemove",t).on("touchmove",t);for(var v=0,x=m.length;x>v;v++)m[v].init();r.gameStartTime=Date.now(),r.gameEvent.on("score",n)},f.update=function(){for(var e=Date.now(),t=e-v,n=0,i=m.length;i>n;n++)m[n].update(t);v=e}}var o=n(2),r=n(3),a=n(6),s=n(7),c=n(9),u=n(13),l=n(14),h=n(16),p=n(17);e.exports=i},function(e,t){"use strict";e.exports={plane:{name:"plane",url:"redfighter.png"},bg:{name:"bg",url:"spacebg.jpg"},rock1:{name:"rock1",url:"rock1.png"},rock2:{name:"rock2",url:"rock2.png"},bullet:{name:"bullet",url:"bullet.png"}}},function(e,t,n){"use strict";function i(e,t){var n=this;o.Container.call(n,e);var i,a,s=5,c=t.minX,u=t.maxX-c;n.init=function(){var t=new o.Sprite(e);n.addChild(t);var s=t.height;t=new o.Sprite(e),t.y=-s,n.addChild(t);var c=r.gameHeight/s;n.scale.x=n.scale.y=c,n.cacheAsBitmap=!0,i=n.height/2,a=n.width-r.gameWidth},n.update=function(e){n.y+=s*e*.01,n.y>i&&(n.y-=i),n.x=-a*(t.x-c)/u}}var o=n(2),r=n(3),a=n(8);a(i,o.Container),e.exports=i},function(e,t){"use strict";e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e}},function(e,t,n){"use strict";function i(e){function t(e){v=!0,c(e.data.local)}function n(){v=!1,d=null}function i(e){v&&c(e.data.local)}function c(e){d=e}function l(){if(h.scale.x=h.scale.y=1,h.y=s.gameHeight,m)return void m.play(0);var e=h.y-h.height,t=e+h.height/2;m=new a,m.add(r.to(h.scale,1.5,{x:.5,y:.5}),0),m.add(r.to(h,.5,{y:e}),0),m.add(r.to(h,1,{y:t,delay:.5,onComplete:function(){p=!1,s.gameEvent.emit("spawn")}}),0)}var h=this;o.Sprite.call(h,e);var p=!0,f=5,d=null,v=!1;h.maxX=s.gameWidth-h.width/2,h.minX=h.width/2;var m,x;h.init=function(){h.anchor.x=h.anchor.y=.5,h.x=s.gameWidth/2,s.input.on("mousedown",t).on("touchstart",t).on("mouseup",n).on("touchend",n).on("mouseupoutside",n).on("touchendoutside",n).on("mousemove",i).on("touchmove",i),u.addGroup(h,"plane"),l()},h.update=function(e){if(!h.parent){if(!(Date.now()-x>=5e3))return;s.gameStage.addChild(h),l()}if(!p){if(d&&h.x!=d.x){var t=d.x,n=Math.min(f*e*.1,Math.abs(t-h.x));h.x+=h.x<t?n:-n,h.x>h.maxX?h.x=h.maxX:h.x<h.minX&&(h.x=h.minX)}v&&s.gameEvent.emit("shoot",h.x,h.y);var i=u.isCollide(h,"rock");i&&(i.parent.removeChild(i),h.parent.removeChild(h),x=Date.now(),s.gameEvent.emit("dead"),p=!0)}}}var o=n(2),r=n(10),a=n(11),s=n(3),c=n(8),u=n(12);c(i,o.Sprite),e.exports=i},function(e,t){e.exports=TweenMax},function(e,t){e.exports=TimelineMax},function(e,t){"use strict";var n={},i={addGroup:function(e,t){var i=n[t];i?i.push(e):n[t]=[e]},isCollide:function(e,t){if(null!=e.parent){for(var i,o,r,a,s,c=e.width,u=e.height,l=e.x+(.5-e.anchor.x)*c,h=e.y+(.5-e.anchor.y)*u,p=n[t],f=0,d=p.length;d>f;f++)if(i=p[f],null!=i.parent&&(o=i.width,r=i.height,a=i.x+(.5-i.anchor.x)*o,s=i.y+(.5-i.anchor.y)*r,Math.abs(l-a)<.5*(c+o)&&Math.abs(h-s)<.5*(u+r)))return i;return null}}};e.exports=i},function(e,t,n){"use strict";function i(e){function t(e,t){var i=Date.now();if(!(l&&1e3/h>i-l)){l=i;var o=c.pop();o.x=e,o.y=t,u.push(o),n.addChild(o)}}var n=this,i=20,a=e;o.Container.call(n);var c=[],u=[],l=null,h=10,p=10;n.init=function(){for(var e=0;i>e;e++){var n=new o.Sprite(a);n.anchor.x=n.anchor.y=.5,c.push(n),s.addGroup(n,"bullet")}r.gameEvent.on("shoot",t)},n.update=function(e){for(var t=0,i=u.length;i>t;t++){var o=u[t];o.y-=p*e*.1,(o.y<-o.height||!o.parent)&&(n.removeChild(o),c.push(o),u.splice(t,1),i--,t--)}}}var o=n(2),r=n(3),a=n(8),s=n(12);a(i,o.Container),e.exports=i},function(e,t,n){"use strict";function i(){function e(){var e=Date.now();if(!(p&&1e3/f>e-p||l.length>2*n||h)){p=e;for(var o,r=i[Math.floor(2*Math.random())];!o;){if(o=a[r].pop(),!o)return void(r=(r+1)%i.length);o.refresh(),l.push(o),t.addChild(o)}}}var t=this,n=40;o.Container.call(t);var i=[s.rock1.name,s.rock2.name],a={},l=[],h=!0,p=null,f=2;t.init=function(){for(var e,t,s,u,l,p=o.loader.resources,f=0,d=i.length;d>f;f++)for(t=i[f],s=p[t].texture,u=a[t]=[],e=0;n>e;e++)l=new c(t,s),l.init(),u.push(l);r.gameEvent.on("spawn",function(){h=!1}),r.gameEvent.on("dead",function(){h=!0})},t.update=function(t){for(var n=0,i=l.length;i>n;n++){var o=l[n];o.parent&&o.y<u+o.height?o.update(t):(a[o.name()].push(o),l.splice(n,1),i--,n--)}e()},t.updateLevel=function(e){f=2*e}}var o=n(2),r=n(3),a=n(8),s=n(6),c=n(15),u=r.gameHeight;a(i,o.Container),e.exports=i},function(e,t,n){"use strict";function i(e,t){function n(){i.x=.25*u+Math.random()*u/2,i.y=-i.height,i.speedX=1*Math.random()-.5,i.speedY=1+4*Math.random(),i.speedRotation=.01*(1*Math.random()-.5),i.life=i.initialLife}var i=this,a=e;o.Sprite.call(i,t),a==c.rock1.name?i.initialLife=4:i.initialLife=1,i.life=i.initialLife,i.name=function(){return a},i.init=function(){i.anchor.x=i.anchor.y=.5,s.addGroup(i,"rock"),n()},i.refresh=n,i.update=function(e){if(i.x+=i.speedX*e*.1,i.y+=i.speedY*e*.1,i.y>r.gameHeight+i.height)return void i.parent.removeChild(i);var t=s.isCollide(i,"bullet");if(i.rotation+=i.speedRotation*e,t){if(t.parent.removeChild(t),i.life--,i.life>0)return;i.parent.removeChild(i),a==c.rock1.name?r.gameEvent.emit("score",10):r.gameEvent.emit("score",5)}}}var o=n(2),r=n(3),a=n(8),s=n(12),c=n(6),u=r.gameWidth;a(i,o.Sprite),e.exports=i},function(e,t,n){(function(t){"use strict";var n,i;e.exports={init:function(){n=t(".scoreDiv"),i=t(".scoreDiv span")},updateScore:function(e){i.html(e)},updatePosition:function(e,t){n.css({top:t,left:e})}}}).call(t,n(1))},function(e,t,n){(function(t){"use strict";var n,i;e.exports={init:function(){n=t(".levelDiv"),i=t(".levelDiv span")},updateLevel:function(e){i.html(e)},updatePosition:function(e,t,i){n.css({top:t,left:e,width:i})}}}).call(t,n(1))}]);
//# sourceMappingURL=bundle.js.map