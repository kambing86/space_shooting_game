!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var i=n(1),o=n(2),r=n(6),a=n(8),s=n(9),u=n(22),c=n(23);$(function(){function e(){requestAnimationFrame(e),f.update(),n.render(l)}function t(){var e,t,i,r;e=t=h.width(),i=r=h.height();var a=o.gameWidth,s=o.gameHeight,f=s/a;f>r/t?t=r/f:r=t*f,p.clear(),p.beginFill(16777215,1);var v=(e-t)/2,d=(i-r)/2;p.drawRect(v,d,t,r),p.endFill(),l.x=v,l.y=d,l.scale.x=t/a,l.scale.y=r/s,n.resize(e,i),u.updatePosition(v,d),c.updatePosition(v,d,t)}var n=i.autoDetectRenderer(window.innerWidth,window.innerHeight,{view:$("canvas")[0]}),l=new i.Container,p=new i.Graphics,f=new a(l),h=$(window);u.init(),c.init(),o.gameStage=l,l.mask=p,function(){var t=$.Deferred(),n=$.Deferred(),a=i.loader;a.baseUrl="image/";var u=[];for(var c in s)u.push(s[c]);a.once("complete",function(){t.resolve()}).once("error",function(){t.reject()}).add(u).load(),o.gameEvent.once("soundDone",function(){n.resolve()}),o.gameEvent.once("soundFail",function(){n.reject()}),r.init(),$.when(t,n).then(function(){t=n=a=u=null;var i=$(".loading");i.find("div").html("Tap on screen to start"),i.on("click",function(){i.off("click"),i.detach(),i=null,f.init(),o.gameEvent.emit("gameStart"),e()})},function(){alert("Loading failed")})}(),h.on("resize",t),t()})},function(e,t){e.exports=PIXI},function(e,t,n){"use strict";var i=n(3),o=n(4);e.exports={gameStage:null,gameWidth:500,gameHeight:800,gameEvent:new i,gameStartTime:null,Input:new o}},function(e,t,n){"use strict";function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(){}var r=Object.prototype.hasOwnProperty,a="function"!=typeof Object.create?"~":!1;o.prototype._events=void 0,o.prototype.eventNames=function(){var e,t=this._events,n=[];if(!t)return n;for(e in t)r.call(t,e)&&n.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(e,t){var n=a?a+e:e,i=this._events&&this._events[n];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,r=i.length,s=new Array(r);r>o;o++)s[o]=i[o].fn;return s},o.prototype.emit=function(e,t,n,i,o,r){var s=a?a+e:e;if(!this._events||!this._events[s])return!1;var u,c,l=this._events[s],p=arguments.length;if("function"==typeof l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),p){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,o),!0;case 6:return l.fn.call(l.context,t,n,i,o,r),!0}for(c=1,u=new Array(p-1);p>c;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var f,h=l.length;for(c=0;h>c;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),p){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;default:if(!u)for(f=1,u=new Array(p-1);p>f;f++)u[f-1]=arguments[f];l[c].fn.apply(l[c].context,u)}}return!0},o.prototype.on=function(e,t,n){var o=new i(t,n||this),r=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],o]:this._events[r].push(o):this._events[r]=o,this},o.prototype.once=function(e,t,n){var o=new i(t,n||this,!0),r=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],o]:this._events[r].push(o):this._events[r]=o,this},o.prototype.removeListener=function(e,t,n,i){var o=a?a+e:e;if(!this._events||!this._events[o])return this;var r=this._events[o],s=[];if(t)if(r.fn)(r.fn!==t||i&&!r.once||n&&r.context!==n)&&s.push(r);else for(var u=0,c=r.length;c>u;u++)(r[u].fn!==t||i&&!r[u].once||n&&r[u].context!==n)&&s.push(r[u]);return s.length?this._events[o]=1===s.length?s[0]:s:delete this._events[o],this},o.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[a?a+e:e]:this._events=a?{}:Object.create(null),this):this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=a,e.exports=o},function(e,t,n){"use strict";function i(){function e(e){t.emit(e.type,e),"keydown"==e.type?n[e.keyCode]=!0:"keyup"==e.type&&(n[e.keyCode]=!1)}var t=this;o.call(t);var n={};t.KEY_LEFT=37,t.KEY_UP=38,t.KEY_RIGHT=39,t.KEY_DOWN=40,$(function(){$(window).keydown(e).keyup(e).keypress(e)}),t.isDown=function(e){return n[e]},t.isUp=function(e){return!n[e]}}var o=n(3),r=n(5);r(i,o),e.exports=i},function(e,t){"use strict";e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e}},function(e,t,n){"use strict";function i(){var e,t="sound/",n={laser:"laser",explosion1:"explosion1",explosion2:"explosion2",explosion3:"explosion3",music:"music"},i=200,a=.2;!function(){function e(){a++,a>=Object.keys(n).length&&(a=s=null,r.gameEvent.emit("soundDone"))}function i(){r.gameEvent.emit("soundFail")}var a=0,s=[];o.on("fileload",e),o.on("fileerror",i);for(var u in n)s.push({id:u,src:n[u]+".mp3"});o.registerSounds(s,t)}(),r.gameEvent.on("explosion",function(e,t,i){i?o.play(n.explosion2):o.play(n.explosion1)}),r.gameEvent.on("dead",function(){o.play(n.explosion3)}),r.gameEvent.on("shoot",function(){var t=Date.now();e&&i>t-e||(e=t,o.play(n.laser,{volume:a}))}),r.gameEvent.once("gameStart",function(){o.play(n.music,{loop:-1})})}var o=n(7),r=n(2),a=null;e.exports={init:function(){return a?a:a=new i}}},function(e,t){e.exports=createjs.Sound},function(e,t,n){"use strict";function i(e){function t(t){t.data.local=e.toLocal(t.data.global),r.Input.emit(t.type,t)}function n(e){b+=e,h.updateScore(b),4>_&&b/500>_&&(_++,v.updateLevel(_),d.updateLevel(_))}function i(){b=0,h.updateScore(b)}var d,m,g,x=this,y=Date.now(),w=[],b=0,_=1,E=1e4;x.init=function(){var h=o.loader.resources,v=new u(h[a.plane.name].texture),x=new s(h[a.bg.name].texture,v);e.addChild(x),w.push(x),e.addChild(v),w.push(v);var y=new c(h[a.bullet.name].texture);e.addChild(y),w.push(y),d=new l,e.addChild(d),w.push(d),m=new p,e.addChild(m),w.push(m),f.init(e),e.interactive=!0,e.on("mousedown",t).on("touchstart",t).on("mouseup",t).on("touchend",t).on("mouseupoutside",t).on("touchendoutside",t).on("mousemove",t).on("touchmove",t);for(var b=0,_=w.length;_>b;b++)w[b].init();r.gameStartTime=Date.now(),r.gameEvent.on("score",n),r.gameEvent.on("resetscore",i),g=Date.now()},x.update=function(){for(var e=Date.now(),t=.001*(e-y),n=0,i=w.length;i>n;n++)w[n].update(t);e-g>E&&(m.spawn(),g=e),y=e}}var o=n(1),r=n(2),a=n(9),s=n(10),u=n(11),c=n(15),l=n(16),p=n(18),f=n(20),h=n(22),v=n(23);e.exports=i},function(e,t){"use strict";e.exports={plane:{name:"plane",url:"redfighter.png"},bg:{name:"bg",url:"spacebg.jpg"},rock1:{name:"rock1",url:"rock1.png"},rock2:{name:"rock2",url:"rock2.png"},bullet:{name:"bullet",url:"bullet.png"},explosion1:{name:"explosion1",url:"explosion1.json"},explosion2:{name:"explosion2",url:"explosion2.json"},dbs:{name:"dbs",url:"dbs.png"},standard:{name:"standard",url:"standard.png"},uob:{name:"uob",url:"uob.png"}}},function(e,t,n){"use strict";function i(e,t){var n=this;o.Container.call(n);var i,a,s=50,u=t.minX,c=t.maxX-u;n.init=function(){var t=new o.Sprite(e);n.addChild(t),i=t.height,t=new o.Sprite(e),t.y=-i,n.addChild(t),n.scale.x=n.scale.y=r.gameHeight/i,i=n.height/2,n.cacheAsBitmap=!0,a=n.width-r.gameWidth},n.update=function(e){n.y+=s*e,n.y>i&&(n.y-=i),n.x=-a*(t.x-u)/c}}var o=n(1),r=n(2),a=n(5);a(i,o.Container),e.exports=i},function(e,t,n){"use strict";function i(e){function t(e){v=!0,h=e.data.local}function n(){v=!1,h=null}function i(e){v&&(h=e.data.local)}function u(){if(l.scale.x=l.scale.y=1,l.y=s.gameHeight,d)return void d.play(0);var e=l.y-l.height,t=e+l.height/2;d=new a,d.add(r.to(l.scale,1.5,{x:.5,y:.5}),0),d.add(r.to(l,.5,{y:e}),0),d.add(r.to(l,1,{y:t,onComplete:function(){p=!1,s.gameEvent.emit("spawn")}}),.5)}var l=this;o.Sprite.call(l,e);var p=!0,f=500,h=null,v=!1;l.maxX=s.gameWidth-l.width/2,l.minX=l.width/2;var d,m;l.init=function(){l.anchor.x=l.anchor.y=.5,l.x=s.gameWidth/2,s.Input.on("mousedown",t).on("touchstart",t).on("mouseup",n).on("touchend",n).on("mouseupoutside",n).on("touchendoutside",n).on("mousemove",i).on("touchmove",i),u()},l.update=function(e){if(!l.visible){if(!(Date.now()-m>=5e3))return;l.visible=!0,u()}if(!p){if(h){if(l.x!=h.x){var t=h.x,n=Math.min(f*e,Math.abs(t-l.x));l.x+=l.x<t?n:-n}}else{var i=s.Input.isDown(s.Input.KEY_LEFT),o=s.Input.isDown(s.Input.KEY_RIGHT);(i||o)&&(l.x+=(i?-1:1)*f*e)}l.x>l.maxX?l.x=l.maxX:l.x<l.minX&&(l.x=l.minX),s.gameEvent.emit("shoot",l.x,l.y);var r=c.isCollide(l,"rock");r&&(r.visible=!1,l.visible=!1,m=Date.now(),s.gameEvent.emit("dead"),s.gameEvent.emit("explosion",r.x,r.y,r.isBig),s.gameEvent.emit("explosion",l.x,l.y),p=!0)}}}var o=n(1),r=n(12),a=n(13),s=n(2),u=n(5),c=n(14);u(i,o.Sprite),e.exports=i},function(e,t){e.exports=TweenMax},function(e,t){e.exports=TimelineMax},function(e,t){"use strict";var n={},i={addGroup:function(e,t){var i=n[t];i?i.push(e):n[t]=[e]},isCollide:function(e,t){if(e.visible){for(var i,o,r,a,s,u=e.width,c=e.height,l=e.x+(.5-e.anchor.x)*u,p=e.y+(.5-e.anchor.y)*c,f=n[t],h=0,v=f.length;v>h;h++)if(i=f[h],i.visible&&(o=i.width,r=i.height,a=i.x+(.5-i.anchor.x)*o,s=i.y+(.5-i.anchor.y)*r,Math.abs(l-a)<(u+o)/2&&Math.abs(p-s)<(c+r)/2))return i;return null}}};e.exports=i},function(e,t,n){"use strict";function i(e){function t(e,t){var n=Date.now();if(!(c&&1e3/l>n-c)){c=n;var i=a.pop();i.x=e,i.y=t,u.push(i),i.visible=!0}}var n=this;o.Container.call(n);var i=20,a=[],u=[],c=null,l=10,p=1e3;n.init=function(){for(var u=0;i>u;u++){var c=new o.Sprite(e);c.anchor.x=c.anchor.y=.5,c.visible=!1,n.addChild(c),a.push(c),s.addGroup(c,"bullet")}r.gameEvent.on("shoot",t)},n.update=function(e){for(var t=0,n=u.length;n>t;t++){var i=u[t];i.y-=p*e,(i.y<-i.height||!i.visible)&&(i.visible=!1,a.push(i),u.splice(t,1),n--,t--)}}}var o=n(1),r=n(2),a=n(5),s=n(14);a(i,o.Container),e.exports=i},function(e,t,n){"use strict";function i(){function e(){var e=Date.now();if(!(p||l.length>a*n||f&&1e3/v>e-f)){f=e;for(var t,o=i[Math.floor(Math.random()*a)];!t;){if(t=c[o].pop(),!t)return void(o=(o+1)%a);t.refresh(),l.push(t),t.visible=!0}}}var t=this,n=40;o.Container.call(t);var i=[s.rock1.name,s.rock2.name],a=i.length,c={},l=[],p=!0,f=null,h=2,v=h;t.init=function(){var e,s,l,f,h,v,d=o.loader.resources;for(s=0;a>s;s++)for(l=i[s],f=d[l].texture,h=c[l]=[],e=0;n>e;e++)v=new u(l,f),v.init(),v.visible=!1,t.addChild(v),h.push(v);r.gameEvent.on("spawn",function(){p=!1}),r.gameEvent.on("dead",function(){p=!0})},t.update=function(t){for(var n=0,i=l.length;i>n;n++){var o=l[n];o.visible&&o.y<r.gameHeight+o.height?o.update(t):(c[o.type].push(o),l.splice(n,1),i--,n--)}e()},t.updateLevel=function(e){v=e*h}}var o=n(1),r=n(2),a=n(5),s=n(9),u=n(17);a(i,o.Container),e.exports=i},function(e,t,n){"use strict";function i(e,t){function n(){i.x=r.gameWidth/4+Math.random()*r.gameWidth/2,i.y=-i.height,i.speedX=100*(1*Math.random()-.5),i.speedY=100*(1.5+Math.random()*a),i.speedRotation=10*(1*Math.random()-.5),i.life=i.initialLife}var i=this;o.Sprite.call(i,t),e==u.rock1.name?i.initialLife=4:i.initialLife=1,i.type=e,i.isBig=e==u.rock1.name;var a=i.isBig?2:4;i.refresh=n,i.init=function(){i.anchor.x=i.anchor.y=.5,s.addGroup(i,"rock"),n()},i.update=function(e){if(i.x+=i.speedX*e,i.y+=i.speedY*e,i.y>r.gameHeight+i.height)return void(i.visible=!1);var t=s.isCollide(i,"bullet");if(i.rotation+=i.speedRotation*e,t){if(t.visible=!1,i.life--,i.life>0)return;i.visible=!1,r.gameEvent.emit("explosion",i.x,i.y,i.isBig),i.isBig?r.gameEvent.emit("score",10):r.gameEvent.emit("score",5)}}}var o=n(1),r=n(2),a=n(5),s=n(14),u=n(9);a(i,o.Sprite),e.exports=i},function(e,t,n){"use strict";function i(){function e(){if(!(l.length>a*n))for(var e,t=i[Math.floor(Math.random()*a)];!e;){if(e=c[t].pop(),!e)return void(t=(t+1)%a);e.refresh(),l.push(e),e.visible=!0}}var t=this,n=2;o.Container.call(t);var i=[s.dbs.name,s.standard.name,s.uob.name],a=i.length,c={},l=[];t.init=function(){var e,r,s,l,p,f,h=o.loader.resources;for(r=0;a>r;r++)for(s=i[r],l=h[s].texture,p=c[s]=[],e=0;n>e;e++)f=new u(s,l),f.init(),f.visible=!1,t.addChild(f),p.push(f)},t.update=function(e){for(var t=0,n=l.length;n>t;t++){var i=l[t];i.visible&&i.y<r.gameHeight+i.height?i.update(e):(c[i.type].push(i),l.splice(t,1),n--,t--)}},t.spawn=e}var o=n(1),r=n(2),a=n(5),s=n(9),u=n(19);a(i,o.Container),e.exports=i},function(e,t,n){"use strict";function i(e,t){var n=this;o.Sprite.call(n,t),n.type=e;var i=10,a=1;n.refresh=function(){n.x=r.gameWidth/4+Math.random()*r.gameWidth/2,n.y=-n.height,n.speedX=100*(1*Math.random()-.5),n.speedY=100*(1.5+Math.random()*a),n.life=i},n.init=function(){n.anchor.x=n.anchor.y=.5,n.refresh()},n.update=function(t){if(n.x+=n.speedX*t,n.y+=n.speedY*t,n.y>r.gameHeight+n.height)return void(n.visible=!1);var i=s.isCollide(n,"bullet");if(i){if(i.visible=!1,n.life--,n.life>0)return;n.visible=!1,r.gameEvent.emit("explosion",n.x,n.y,!0),e==u.dbs.name?r.gameEvent.emit("resetscore"):r.gameEvent.emit("score",100)}}}var o=n(1),r=n(2),a=n(5),s=n(14),u=n(9);a(i,o.Sprite),e.exports=i},function(e,t,n){"use strict";function i(e){var t={},n=[a.explosion1.name,a.explosion2.name];!function(){var i,r,a,u,c,l,p=20,f=n.length,h=o.loader.resources;for(i=0;f>i;i++)for(a=n[i],u=s.convert(h[a].textures),c=t[a]=[],r=0;p>r;r++)l=new o.extras.MovieClip(u),l.anchor.x=l.anchor.y=.5,l.loop=!1,l.type=a,0==i&&(l.animationSpeed=.5,l.scale.x=l.scale.y=2),l.onComplete=function(){l.visible=!1,t[this.type].push(this)},l.visible=!1,e.addChild(l),c.push(l)}(),r.gameEvent.on("explosion",function(e,i,o){var r;r=o?n[0]:n[1];var a=t[r].pop();a&&(a.rotation=(Math.random()>.5?-1:1)*Math.random()*Math.PI,a.x=e,a.y=i,a.visible=!0,a.gotoAndPlay(0))})}var o=n(1),r=n(2),a=n(9),s=n(21),u=null;e.exports={init:function(e,t){return u?u:u=new i(e,t)}}},function(e,t){"use strict";e.exports={convert:function(e){var t=[];for(var n in e)t.push(e[n]);return t}}},function(e,t){"use strict";var n,i;e.exports={init:function(){n=$(".scoreDiv"),i=$(".scoreDiv span")},updateScore:function(e){i.html(e)},updatePosition:function(e,t){n.css({top:t,left:e})}}},function(e,t){"use strict";var n,i;e.exports={init:function(){n=$(".levelDiv"),i=$(".levelDiv span")},updateLevel:function(e){i.html(e)},updatePosition:function(e,t,i){n.css({top:t,left:e,width:i})}}}]);
//# sourceMappingURL=bundle.js.map