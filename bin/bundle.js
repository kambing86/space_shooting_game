!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var o=n(1),i=n(2),r=n(6),a=n(8),s=n(9),u=n(22),c=n(23);$(function(){function e(){requestAnimationFrame(e),f.update(),n.render(l)}function t(){var e,t,o,r;e=t=d.width(),o=r=d.height();var a=i.gameWidth,s=i.gameHeight,h=s/a;h>r/t?t=r/h:r=t*h,p.clear(),p.beginFill(16777215,1);var f=(e-t)/2,v=(o-r)/2;p.drawRect(f,v,t,r),p.endFill(),l.x=f,l.y=v,l.scale.x=t/a,l.scale.y=r/s,n.resize(e,o),u.updatePosition(f,v),c.updatePosition(f,v,t)}var n=o.autoDetectRenderer(window.innerWidth,window.innerHeight,{view:$("canvas")[0]}),l=new o.Container,p=new o.Graphics,h=o.loader,f=new a(l),d=$(window);u.init(),c.init(),i.gameStage=l,l.mask=p;var v=$.Deferred(),m=$.Deferred();h.baseUrl="image/";var x=[];for(var g in s)x.push(s[g]);h.once("complete",function(){v.resolve()}).once("error",function(){v.reject()}).add(x).load(),i.gameEvent.once("soundDone",function(){m.resolve()}),i.gameEvent.once("soundFail",function(){m.reject()}),r.init(),$.when(v,m).then(function(){f.init(),i.gameEvent.emit("gameStart"),e()},function(){alert("Loading failed")}),d.on("resize",t),t()})},function(e,t){e.exports=PIXI},function(e,t,n){"use strict";var o=n(3),i=n(4);e.exports={gameStage:null,gameWidth:500,gameHeight:800,gameEvent:new o,gameStartTime:null,Input:new i}},function(e,t,n){"use strict";function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(){}var r=Object.prototype.hasOwnProperty,a="function"!=typeof Object.create?"~":!1;i.prototype._events=void 0,i.prototype.eventNames=function(){var e,t=this._events,n=[];if(!t)return n;for(e in t)r.call(t,e)&&n.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},i.prototype.listeners=function(e,t){var n=a?a+e:e,o=this._events&&this._events[n];if(t)return!!o;if(!o)return[];if(o.fn)return[o.fn];for(var i=0,r=o.length,s=new Array(r);r>i;i++)s[i]=o[i].fn;return s},i.prototype.emit=function(e,t,n,o,i,r){var s=a?a+e:e;if(!this._events||!this._events[s])return!1;var u,c,l=this._events[s],p=arguments.length;if("function"==typeof l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),p){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,o),!0;case 5:return l.fn.call(l.context,t,n,o,i),!0;case 6:return l.fn.call(l.context,t,n,o,i,r),!0}for(c=1,u=new Array(p-1);p>c;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,f=l.length;for(c=0;f>c;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),p){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;default:if(!u)for(h=1,u=new Array(p-1);p>h;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},i.prototype.on=function(e,t,n){var i=new o(t,n||this),r=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],i]:this._events[r].push(i):this._events[r]=i,this},i.prototype.once=function(e,t,n){var i=new o(t,n||this,!0),r=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],i]:this._events[r].push(i):this._events[r]=i,this},i.prototype.removeListener=function(e,t,n,o){var i=a?a+e:e;if(!this._events||!this._events[i])return this;var r=this._events[i],s=[];if(t)if(r.fn)(r.fn!==t||o&&!r.once||n&&r.context!==n)&&s.push(r);else for(var u=0,c=r.length;c>u;u++)(r[u].fn!==t||o&&!r[u].once||n&&r[u].context!==n)&&s.push(r[u]);return s.length?this._events[i]=1===s.length?s[0]:s:delete this._events[i],this},i.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[a?a+e:e]:this._events=a?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=a,e.exports=i},function(e,t,n){"use strict";function o(){function e(e){t.emit(e.type,e),"keydown"==e.type?n[e.keyCode]=!0:"keyup"==e.type&&(n[e.keyCode]=!1)}var t=this;i.call(t);var n={};t.KEY_LEFT=37,t.KEY_UP=38,t.KEY_RIGHT=39,t.KEY_DOWN=40,$(function(){$(window).keydown(e).keyup(e).keypress(e)}),t.isDown=function(e){return n[e]},t.isUp=function(e){return!n[e]}}var i=n(3),r=n(5);r(o,i),e.exports=o},function(e,t){"use strict";e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e}},function(e,t,n){"use strict";function o(){h++,h>=Object.keys(p).length&&f.emit("soundDone")}function i(){f.emit("soundFail")}function r(){s.on("fileload",o),s.on("fileerror",i);var e=[];for(var t in p)e.push({id:t,src:p[t]+".mp3"});s.registerSounds(e,l),f.on("explosion",function(e,t,n){n?s.play(p.explosion2):s.play(p.explosion1)}),f.on("dead",function(){s.play(p.explosion3)}),f.on("shoot",function(){var e=d();a&&v>e-a||(a=e,s.play(p.laser,{volume:m}))}),f.once("gameStart",function(){s.play(p.music,{loop:-1})})}var a,s=n(7),u=n(2),c=null,l="sound/",p={laser:"laser",explosion1:"explosion1",explosion2:"explosion2",explosion3:"explosion3",music:"music"},h=0,f=u.gameEvent,d=Date.now,v=200,m=.2;e.exports={init:function(){return c?c:c=new r}}},function(e,t){e.exports=createjs.Sound},function(e,t,n){"use strict";function o(e){function t(t){t.data.local=e.toLocal(t.data.global),v.emit(t.type,t)}function n(e){_+=e,f.updateScore(_),4>k&&_/500>k&&(k++,d.updateLevel(k),x.updateLevel(k))}function o(){_=0,f.updateScore(_)}var x,g,y,w=this,b=Date.now(),C=[],_=0,k=1,S=1e4;w.init=function(){var f=i.loader.resources,d=new u(f[a.plane.name].texture),v=new s(f[a.bg.name].texture,d);e.addChild(v),C.push(v),e.addChild(d),C.push(d);var w=new c(f[a.bullet.name].texture);e.addChild(w),C.push(w),x=new l,e.addChild(x),C.push(x),g=new p,e.addChild(g),C.push(g),h.init(e),e.interactive=!0,e.on("mousedown",t).on("touchstart",t).on("mouseup",t).on("touchend",t).on("mouseupoutside",t).on("touchendoutside",t).on("mousemove",t).on("touchmove",t);for(var b=0,_=C.length;_>b;b++)C[b].init();r.gameStartTime=m(),r.gameEvent.on("score",n),r.gameEvent.on("resetscore",o),y=m()},w.update=function(){for(var e=m(),t=.001*(e-b),n=0,o=C.length;o>n;n++)C[n].update(t);e-y>S&&(g.spawn(),y=e),b=e}}var i=n(1),r=n(2),a=n(9),s=n(10),u=n(11),c=n(15),l=n(16),p=n(18),h=n(20),f=n(22),d=n(23),v=r.Input,m=Date.now;e.exports=o},function(e,t){"use strict";e.exports={plane:{name:"plane",url:"redfighter.png"},bg:{name:"bg",url:"spacebg.jpg"},rock1:{name:"rock1",url:"rock1.png"},rock2:{name:"rock2",url:"rock2.png"},bullet:{name:"bullet",url:"bullet.png"},explosion1:{name:"explosion1",url:"explosion1.json"},explosion2:{name:"explosion2",url:"explosion2.json"},dbs:{name:"dbs",url:"dbs.png"},standard:{name:"standard",url:"standard.png"},uob:{name:"uob",url:"uob.png"}}},function(e,t,n){"use strict";function o(e,t){var n=this;i.Container.call(n);var o,a,s=50,u=t.minX,c=t.maxX-u;n.init=function(){var t=new i.Sprite(e);n.addChild(t),o=t.height,t=new i.Sprite(e),t.y=-o,n.addChild(t),n.scale.x=n.scale.y=r.gameHeight/o,o=n.height/2,n.cacheAsBitmap=!0,a=n.width-r.gameWidth},n.update=function(e){n.y+=s*e,n.y>o&&(n.y-=o),n.x=-a*(t.x-u)/c}}var i=n(1),r=n(2),a=n(5);a(o,i.Container),e.exports=o},function(e,t,n){"use strict";function o(e){function t(e){b=!0,w=e.data.local}function n(){b=!1,w=null}function o(e){b&&(w=e.data.local)}function c(){if(x.scale.x=x.scale.y=1,x.y=u.gameHeight,C)return void C.play(0);var e=x.y-x.height,t=e+x.height/2;C=new s,C.add(a.to(x.scale,1.5,{x:.5,y:.5}),0),C.add(a.to(x,.5,{y:e}),0),C.add(a.to(x,1,{y:t,onComplete:function(){g=!1,p.emit("spawn")}}),.5)}var x=this;r.Sprite.call(x,e);var g=!0,y=500,w=null,b=!1;x.maxX=u.gameWidth-x.width/2,x.minX=x.width/2;var C,_;x.init=function(){i=u.gameStage,x.anchor.x=x.anchor.y=.5,x.x=u.gameWidth/2,h.on("mousedown",t).on("touchstart",t).on("mouseup",n).on("touchend",n).on("mouseupoutside",n).on("touchendoutside",n).on("mousemove",o).on("touchmove",o),l.addGroup(x,"plane"),c()},x.update=function(e){if(!x.parent){if(!(f()-_>=5e3))return;i.addChild(x),c()}if(!g){if(w){if(x.x!=w.x){var t=w.x,n=d(y*e,v(t-x.x));x.x+=x.x<t?n:-n}}else{var o=h.isDown(h.KEY_LEFT),r=h.isDown(h.KEY_RIGHT);(o||r)&&(x.x+=(o?-1:1)*y*e)}x.x>x.maxX?x.x=x.maxX:x.x<x.minX&&(x.x=x.minX),p.emit("shoot",x.x,x.y);var a=m(x,"rock");a&&(a.parent.removeChild(a),x.parent.removeChild(x),_=f(),p.emit("dead"),p.emit("explosion",a.x,a.y,a.isBig),p.emit("explosion",x.x,x.y),g=!0)}}}var i,r=n(1),a=n(12),s=n(13),u=n(2),c=n(5),l=n(14),p=u.gameEvent,h=u.Input,f=Date.now,d=Math.min,v=Math.abs,m=l.isCollide;c(o,r.Sprite),e.exports=o},function(e,t){e.exports=TweenMax},function(e,t){e.exports=TimelineMax},function(e,t){"use strict";var n={},o={addGroup:function(e,t){var o=n[t];o?o.push(e):n[t]=[e]},isCollide:function(e,t){if(null!=e.parent){for(var o,i,r,a,s,u=e.width,c=e.height,l=e.x+(.5-e.anchor.x)*u,p=e.y+(.5-e.anchor.y)*c,h=n[t],f=0,d=h.length;d>f;f++)if(o=h[f],null!=o.parent&&(i=o.width,r=o.height,a=o.x+(.5-o.anchor.x)*i,s=o.y+(.5-o.anchor.y)*r,Math.abs(l-a)<(u+i)/2&&Math.abs(p-s)<(c+r)/2))return o;return null}}};e.exports=o},function(e,t,n){"use strict";function o(e){function t(e,t){var o=u();if(!(l&&1e3/p>o-l)){l=o;var i=a.pop();i.x=e,i.y=t,c.push(i),n.addChild(i)}}var n=this,o=20;i.Container.call(n);var a=[],c=[],l=null,p=10,h=1e3;n.init=function(){for(var n=0;o>n;n++){var u=new i.Sprite(e);u.anchor.x=u.anchor.y=.5,a.push(u),s.addGroup(u,"bullet")}r.gameEvent.on("shoot",t)},n.update=function(e){for(var t=0,o=c.length;o>t;t++){var i=c[t];i.y-=h*e,(i.y<-i.height||!i.parent)&&(n.removeChild(i),a.push(i),c.splice(t,1),o--,t--)}}}var i=n(1),r=n(2),a=n(5),s=n(14),u=Date.now;a(o,i.Container),e.exports=o},function(e,t,n){"use strict";function o(){function e(){var e=l();if(!(v||d.length>a*n||m&&1e3/g>e-m)){m=e;for(var i,r=o[p(h()*a)];!i;){if(i=f[r].pop(),!i)return void(r=(r+1)%a);i.refresh(),d.push(i),t.addChild(i)}}}var t=this,n=40;i.Container.call(t);var o=[s.rock1.name,s.rock2.name],a=o.length,f={},d=[],v=!0,m=null,x=2,g=x;t.init=function(){var e,t,s,c,l,p,h=i.loader.resources;for(t=0;a>t;t++)for(s=o[t],c=h[s].texture,l=f[s]=[],e=0;n>e;e++)p=new u(s,c),p.init(),l.push(p);r.gameEvent.on("spawn",function(){v=!1}),r.gameEvent.on("dead",function(){v=!0})},t.update=function(t){for(var n=0,o=d.length;o>n;n++){var i=d[n];i.parent&&i.y<c+i.height?i.update(t):(f[i.type].push(i),d.splice(n,1),o--,n--)}e()},t.updateLevel=function(e){g=e*x}}var i=n(1),r=n(2),a=n(5),s=n(9),u=n(17),c=r.gameHeight,l=Date.now,p=Math.floor,h=Math.random;a(o,i.Container),e.exports=o},function(e,t,n){"use strict";function o(e,t){function n(){o.x=c/4+h()*c/2,o.y=-o.height,o.speedX=100*(1*h()-.5),o.speedY=100*(1.5+h()*r),o.speedRotation=10*(1*h()-.5),o.life=o.initialLife}var o=this;i.Sprite.call(o,t),e==u.rock1.name?o.initialLife=4:o.initialLife=1,o.type=e,o.isBig=e==u.rock1.name;var r=o.isBig?2:4;o.refresh=n,o.init=function(){o.anchor.x=o.anchor.y=.5,s.addGroup(o,"rock"),n()},o.update=function(e){if(o.x+=o.speedX*e,o.y+=o.speedY*e,o.y>l+o.height)return void o.parent.removeChild(o);var t=f(o,"bullet");if(o.rotation+=o.speedRotation*e,t){if(t.parent.removeChild(t),o.life--,o.life>0)return;o.parent.removeChild(o),p.emit("explosion",o.x,o.y,o.isBig),o.isBig?p.emit("score",10):p.emit("score",5)}}}var i=n(1),r=n(2),a=n(5),s=n(14),u=n(9),c=r.gameWidth,l=r.gameHeight,p=r.gameEvent,h=Math.random,f=s.isCollide;a(o,i.Sprite),e.exports=o},function(e,t,n){"use strict";function o(){function e(){for(var e,n=o[l(p()*r)];!e;){if(e=a[n].pop(),!e)return void(n=(n+1)%r);e.refresh(),h.push(e),t.addChild(e)}}var t=this,n=2;i.Container.call(t);var o=[s.dbs.name,s.standard.name,s.uob.name],r=o.length,a={},h=[];t.init=function(){var e,t,s,c,l,p,h=i.loader.resources;for(t=0;r>t;t++)for(s=o[t],c=h[s].texture,l=a[s]=[],e=0;n>e;e++)p=new u(s,c),p.init(),l.push(p)},t.update=function(e){for(var t=0,n=h.length;n>t;t++){var o=h[t];o.parent&&o.y<c+o.height?o.update(e):(a[o.type].push(o),h.splice(t,1),n--,t--)}},t.spawn=e}var i=n(1),r=n(2),a=n(5),s=n(9),u=n(19),c=r.gameHeight,l=Math.floor,p=Math.random;a(o,i.Container),e.exports=o},function(e,t,n){"use strict";function o(e,t){function n(){o.x=c/4+h()*c/2,o.y=-o.height,o.speedX=100*(1*h()-.5),o.speedY=100*(1.5+h()*r),o.life=o.initialLife}var o=this;i.Sprite.call(o,t),o.initialLife=10,o.type=e;var r=1;o.refresh=n,o.init=function(){o.anchor.x=o.anchor.y=.5,n()},o.update=function(t){if(o.x+=o.speedX*t,o.y+=o.speedY*t,o.y>l+o.height)return void o.parent.removeChild(o);var n=f(o,"bullet");if(n){if(n.parent.removeChild(n),o.life--,o.life>0)return;o.parent.removeChild(o),p.emit("explosion",o.x,o.y,!0),e==u.dbs.name?p.emit("resetscore"):p.emit("score",100)}}}var i=n(1),r=n(2),a=n(5),s=n(14),u=n(9),c=r.gameWidth,l=r.gameHeight,p=r.gameEvent,h=Math.random,f=s.isCollide;a(o,i.Sprite),e.exports=o},function(e,t,n){"use strict";function o(e){var t=20,n={},o=[a.explosion1.name,a.explosion2.name],u=o.length;!function(){var e,r,a,c,l,p,h=i.loader.resources;for(e=0;u>e;e++)for(a=o[e],c=s.convert(h[a].textures),l=n[a]=[],r=0;t>r;r++)p=new i.extras.MovieClip(c),p.anchor.x=p.anchor.y=.5,p.loop=!1,p.type=a,0==e&&(p.animationSpeed=.5,p.scale.x=p.scale.y=2),p.onComplete=function(){this.parent.removeChild(this),n[this.type].push(this)},l.push(p)}(),r.gameEvent.on("explosion",function(t,i,r){var a;a=r?o[0]:o[1];var s=n[a].pop();s&&(s.rotation=(l()>.5?-1:1)*l()*c,s.x=t,s.y=i,e.addChild(s),s.gotoAndPlay(0))})}var i=n(1),r=n(2),a=n(9),s=n(21),u=null,c=Math.PI,l=Math.random;e.exports={init:function(e,t){return u?u:u=new o(e,t)}}},function(e,t){"use strict";e.exports={convert:function(e){var t=[];for(var n in e)t.push(e[n]);return t}}},function(e,t){"use strict";var n,o;e.exports={init:function(){n=$(".scoreDiv"),o=$(".scoreDiv span")},updateScore:function(e){o.html(e)},updatePosition:function(e,t){n.css({top:t,left:e})}}},function(e,t){"use strict";var n,o;e.exports={init:function(){n=$(".levelDiv"),o=$(".levelDiv span")},updateLevel:function(e){o.html(e)},updatePosition:function(e,t,o){n.css({top:t,left:e,width:o})}}}]);
//# sourceMappingURL=bundle.js.map